webpackJsonp([3],{"7lHm":function(e,t){},RtCy:function(e,t){},"j+Gy":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),s=a.n(r),l=a("lC5x"),i=a.n(l),n=a("J0Oq"),o=a.n(n),u=a("gyMJ"),m=a("b4Ps"),c={data:function(){return{tableData:[],labelPosition:"left",formLabelAlign:{realName:"",username:"",pass:"",surePass:"",roleId:""},editform:{username:"",realName:"",roleId:"",status:"1",userId:""},resetfrom:{username:"",realName:"",pass:"",surePass:"",userId:""},total:0,pageSize:20,pageNum:1,dialogVisible:!1,editDialogVisible:!1,resetDialogVisible:!1,userRoleData:[]}},mixins:[a("KHRU").a],mounted:function(){this.userList()},methods:{onSubmit:function(){this.dialogVisible=!0,this.rolelist()},rolelist:function(e){var t=this;return o()(i.a.mark(function a(){var r,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.rolelist({pageNum:1,pageSize:100});case 2:r=a.sent,s=e||"",200===r.code?(t.userRoleData=r.data.list,""!=s?t.editform.roleId=s:t.formLabelAlign.region=r.data.list[0].rolesId):(t.userRoleData=[],t.$message({message:r.message,type:"warning"}));case 5:case"end":return a.stop()}},a,t)}))()},saveSubmit:function(){this.addUser()},addUser:function(){var e=this;return o()(i.a.mark(function t(){var a,r,l,n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.formLabelAlign.username){t.next=3;break}return e.$message({message:"账号不能为空",type:"warning"}),t.abrupt("return",!1);case 3:if(""!==e.formLabelAlign.realName){t.next=6;break}return e.$message({message:"负责人不能为空",type:"warning"}),t.abrupt("return",!1);case 6:if(""!==e.formLabelAlign.pass&&""!==e.formLabelAlign.surePass){t.next=9;break}return e.$message({message:"请输入密码",type:"warning"}),t.abrupt("return",!1);case 9:if(e.formLabelAlign.pass==e.formLabelAlign.surePass){t.next=12;break}return e.$message({message:"密码不一致",type:"warning"}),t.abrupt("return",!1);case 12:return a=document.getElementById("publicSrc").value,(r=new m.JSEncrypt).setPublicKey(a),l=r.encrypt(e.formLabelAlign.pass),n=s()({},e.formLabelAlign,{password:l}),t.next=19,u.a.addUser(n);case 19:200===(o=t.sent).code?(e.dialogVisible=!1,e.userList()):e.$message({message:o.message,type:"warning"});case 21:case"end":return t.stop()}},t,e)}))()},userList:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.userList({pageNum:e.pageNum,pageSize:e.pageSize});case 2:200===(a=t.sent).code?(e.tableData=a.data.list,e.total=a.data.total):904===a.code&&(e.tableData=[],e.total=1,e.$message({message:a.message,type:"warning"}));case 4:case"end":return t.stop()}},t,e)}))()},handleClick:function(e,t,a,r){this.rolelist(r),this.editDialogVisible=!0,this.editform.roleId=r,this.editform.username=t,this.editform.userId=e,this.editform.realName=a},editSubmit:function(){this.userRoleInfo()},userRoleInfo:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.userRoleInfo(e.editform);case 2:200===(a=t.sent).code?(e.editDialogVisible=!1,e.userList()):e.$message({message:a.message,type:"warning"});case 4:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pageSize=e,this.userList()},handleCurrentChange:function(e){this.pageNum=e,this.userList()},handleClose:function(){},resetPass:function(e,t,a){this.resetfrom.username=t,this.resetfrom.userId=e,this.resetfrom.roleName=a,this.resetDialogVisible=!0},resetSubmit:function(){this.updateRoleInfo()},updateRoleInfo:function(){var e=this;return o()(i.a.mark(function t(){var a,r,l,n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.resetfrom.pass&&""!==e.resetfrom.surePass){t.next=3;break}return alert("请输入密码"),t.abrupt("return",!1);case 3:if(e.resetfrom.pass==e.resetfrom.surePass){t.next=6;break}return alert("密码不一致"),t.abrupt("return",!1);case 6:return a=document.getElementById("publicSrc").value,(r=new m.JSEncrypt).setPublicKey(a),l=r.encrypt(e.resetfrom.pass),n=s()({},{userId:e.resetfrom.userId},{newPassword:l}),t.next=13,u.a.updateRoleInfo(n);case 13:200===(o=t.sent).code?(e.resetDialogVisible=!1,e.userList()):e.$message({message:o.message,type:"warning"});case 15:case"end":return t.stop()}},t,e)}))()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"helpFul"},[a("div",[a("div",[[a("header",[a("textarea",{staticStyle:{display:"none"},attrs:{name:"",id:"publicSrc",cols:"30",rows:"10"}},[e._v("          -----BEGIN RSA PRIVATE KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCK8ndL6c6GpbqOfG8WvmvgzSMP3JI/HYR3VwXM\nxo7xomFu99Nfvhsz/zSpr94uijSB/JCLl6g2sKdqQjKGIvGJalwPHL9j1a0GwC1cxTW9yyUMvrIS\nMn4al2IuWiil/on6pUHeeUOTNqImfB0l30AyGha6OwROU7q7E5z1tiZNYwIDAQAB\n-----END RSA PRIVATE KEY-----\n        ")]),e._v(" "),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"right"},attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新增账号")])],1)],1)],1)],e._v(" "),[a("section",[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"用户角色","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realName",label:"负责人","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postTime",label:"添加时间","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditStatus",label:"状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("span",[e._v("启用")]):-1===t.row.status?a("span",[e._v("停用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleClick(t.row.userId,t.row.username,t.row.realName,t.row.roleId)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.resetPass(t.row.userId,t.row.username,t.row.roleName)}}},[e._v("重置密码")])]}}])})],1)],1)]],2),e._v(" "),[a("footer",[a("div",[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]],2),e._v(" "),a("el-dialog",{attrs:{title:"新增账号",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[[a("el-form",{staticClass:"saveRole",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formLabelAlign}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{model:{value:e.formLabelAlign.username,callback:function(t){e.$set(e.formLabelAlign,"username","string"==typeof t?t.trim():t)},expression:"formLabelAlign.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{model:{value:e.formLabelAlign.realName,callback:function(t){e.$set(e.formLabelAlign,"realName","string"==typeof t?t.trim():t)},expression:"formLabelAlign.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formLabelAlign.pass,callback:function(t){e.$set(e.formLabelAlign,"pass","string"==typeof t?t.trim():t)},expression:"formLabelAlign.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.formLabelAlign.surePass,callback:function(t){e.$set(e.formLabelAlign,"surePass","string"==typeof t?t.trim():t)},expression:"formLabelAlign.surePass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formLabelAlign.roleId,callback:function(t){e.$set(e.formLabelAlign,"roleId",t)},expression:"formLabelAlign.roleId"}},e._l(e.userRoleData,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.name,value:e.roleId}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveSubmit}},[e._v("保存")])],1)],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:"编辑账号",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.handleClose}},[[a("el-form",{staticClass:"saveRole",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.editform}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{model:{value:e.editform.username,callback:function(t){e.$set(e.editform,"username",t)},expression:"editform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.editform.realName,callback:function(t){e.$set(e.editform,"realName",t)},expression:"editform.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editform.roleId,callback:function(t){e.$set(e.editform,"roleId",t)},expression:"editform.roleId"}},e._l(e.userRoleData,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.name,value:e.roleId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账号状态"}},[a("el-radio-group",{model:{value:e.editform.status,callback:function(t){e.$set(e.editform,"status",t)},expression:"editform.status"}},[a("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"-1"}},[e._v("停用")])],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("保存")])],1)],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:"重置密码",visible:e.resetDialogVisible,width:"50%"},on:{"update:visible":function(t){e.resetDialogVisible=t},close:e.handleClose}},[[a("el-form",{staticClass:"saveRole",attrs:{"label-position":e.labelPosition,"label-width":"100px",model:e.resetfrom}},[a("el-form-item",{attrs:{label:"用户角色"}},[a("el-input",{attrs:{disabled:""},model:{value:e.resetfrom.roleName,callback:function(t){e.$set(e.resetfrom,"roleName",t)},expression:"resetfrom.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{disabled:""},model:{value:e.resetfrom.username,callback:function(t){e.$set(e.resetfrom,"username",t)},expression:"resetfrom.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"输入新密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.resetfrom.pass,callback:function(t){e.$set(e.resetfrom,"pass",t)},expression:"resetfrom.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认新密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.resetfrom.surePass,callback:function(t){e.$set(e.resetfrom,"surePass",t)},expression:"resetfrom.surePass"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"40px"}},[a("el-button",{on:{click:function(t){e.resetDialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.resetSubmit}},[e._v("保存")])],1)],1)]],2)],1)},staticRenderFns:[]};var d=a("C7Lr")(c,f,!1,function(e){a("RtCy"),a("7lHm")},"data-v-ba4a7c9e",null);t.default=d.exports}});
//# sourceMappingURL=3.ef78c56e858f0f564137.js.map