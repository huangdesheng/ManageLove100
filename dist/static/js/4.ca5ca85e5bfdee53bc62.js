webpackJsonp([4],{T9Uy:function(e,t){},UW0L:function(e,t){},kT8b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("lC5x"),i=a.n(n),r=a("J0Oq"),l=a.n(r),s=a("gyMJ"),o=a("CtzY"),c=a.n(o),u=a("nm5P"),m=a("KHRU"),g={data:function(){return{formLabelAlign:{imgUrl:"",jumpId:"",bannerId:"",jumpType:"1",title:""},item:{imgUrl:"",jumpId:"",bannerId:"",jumpType:"1",title:""},tableData:[],total:0,pageSize:20,pageNum:1,dialogVisible:!1,title:"",projectName:[]}},mixins:[u.a,m.a],mounted:function(){this.bannerList()},methods:{selectUrl:function(e,t){1==e?this.groupsList():2==e&&this.welfareList()},selectName:function(e){console.log(e);var t=this.projectName.filter(function(t){return t.projectId===e});this.formLabelAlign.title=t[0].title},groupsList:function(){var e=this;return l()(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.groups({pageNum:1,pageSize:1e3,auditStatus:""});case 2:200===(a=t.sent).code?(""!=e.formLabelAlign.jumpId&&1!=e.formLabelAlign.jumpType||(e.formLabelAlign.jumpId=a.data.list[0].projectId.toString(),e.formLabelAlign.title=a.data.list[0].title),n=a.data.list.map(function(e){return{title:e.title,projectId:e.projectId.toString()}}),console.log(n),e.projectName=n):904===a.code&&(console.log(2),e.formLabelAlign.jumpId="",e.projectName=[]);case 4:case"end":return t.stop()}},t,e)}))()},welfareList:function(){var e=this;return l()(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.welfareList({pageNum:1,pageSize:1e3,status:"-1"});case 2:200===(a=t.sent).code?(""!=e.formLabelAlign.jumpId&&2!=e.formLabelAlign.jumpType||(e.formLabelAlign.jumpId=a.data.list[0].projectId.toString(),e.formLabelAlign.title=a.data.list[0].title),n=a.data.list.map(function(e){return{title:e.title,projectId:e.projectId.toString()}}),e.projectName=n):904===a.code&&(console.log(1),e.formLabelAlign.jumpId="",e.projectName=[]);case 4:case"end":return t.stop()}},t,e)}))()},bannerList:function(){var e=this;return l()(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.bannerList({pageNum:e.pageNum,pageSize:e.pageSize});case 2:200===(a=t.sent).code?(e.tableData=a.data.list,e.total=a.data.total,n=e.tableData.filter(function(e){return 1===e.state}),e.$nextTick(function(){for(var t=0;t<n.length;t++)e.$refs.table.toggleRowSelection(n[t],!0)})):904===a.code?(e.tableData=[],e.total=1):e.$message({message:a.message,type:"warning"});case 4:case"end":return t.stop()}},t,e)}))()},onSubmit:function(){this.title="新增Banner",this.formLabelAlign.jumpId="",this.formLabelAlign.bannerId="",this.formLabelAlign.jumpType="1",this.formLabelAlign.title="",this.formLabelAlign.imgUrl="",this.dialogVisible=!0,this.groupsList()},submitForm:function(){this.addBanner()},addBanner:function(){var e=this;return l()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=void 0,""!==e.formLabelAlign.bannerId){t.next=7;break}return t.next=4,s.a.addBanner(e.formLabelAlign);case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,s.a.updateBanner(e.formLabelAlign);case 9:a=t.sent;case 10:200===a.code?(e.bannerList(),e.$message({message:a.data.msg}),e.dialogVisible=!1):e.$message({message:a.message,type:"warning"});case 11:case"end":return t.stop()}},t,e)}))()},resetForm:function(){this.dialogVisible=!1},checkBtn:function(e){this.BannerDetails(e),this.title="编辑Banner"},BannerDetails:function(e){var t=this;return l()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.BannerDetails(e);case 2:200===(n=a.sent).code?(t.formLabelAlign=n.data,t.formLabelAlign.jumpType=n.data.jumpType.toString(),t.formLabelAlign.jumpId=n.data.jumpId.toString(),"1"==t.formLabelAlign.jumpType?t.groupsList():t.welfareList(),console.log(t.formLabelAlign),t.dialogVisible=!0):t.$message({message:n.message,type:"warning"});case 4:case"end":return a.stop()}},a,t)}))()},handleSizeChange:function(e){this.pageSize=e,this.bannerList()},handleCurrentChange:function(e){this.pageNum=e,this.bannerList()},handleClose:function(){},fileChange:function(e){this.singleUpload(e)},singleUpload:function(e){var t=this;return l()(i.a.mark(function a(){var n,r,l;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),(n=new FormData).append("file",e.srcElement.files[0]),r={"Content-Type":"multipart/form-data"},a.next=6,s.a.singleUpload(n,r);case 6:200===(l=a.sent).code?t.formLabelAlign.imgUrl=l.data.photoUrl:t.$message({message:l.message,type:"warning"});case 8:case"end":return a.stop()}},a,t)}))()},handleChange:function(e,t){this.exhibition(t.bannerId,e)},exhibition:function(e,t){var a=this;return l()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.exhibition(c.a.stringify({bannerId:e}));case 2:r=n.sent,console.log(t),200===r.code?a.bannerList():(a.$message({message:r.message,type:"warning"}),a.$refs.table.toggleRowSelection(a.$refs.table.tableData[3],!1));case 5:case"end":return n.stop()}},n,a)}))()},deleteBtn:function(e){var t=this;this.$confirm("是否删除该项目","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"primary"}).then(function(){t.deleteBanner(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteBanner:function(e){var t=this;return l()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.deleteBanner(c.a.stringify({bannerId:e}));case 2:200===(n=a.sent).code?(t.bannerList(),t.$message({type:"success",message:"删除成功!"})):t.$message({message:n.message,type:"warning"});case 4:case"end":return a.stop()}},a,t)}))()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"helpFul"},[a("div",[a("div",[[a("header",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"right"},attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新增栏目")])],1)],1)],1)],e._v(" "),[a("section",[a("el-table",{ref:"table",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:""},on:{select:e.handleChange}},[a("el-table-column",{attrs:{type:"selection",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"项目标题","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postTime",label:"添加时间","min-width":"120"}}),e._v(" "),a("el-table-column",{staticClass:"make",attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.checkBtn(t.row.bannerId)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteBtn(t.row.bannerId)}}},[e._v("删除")])]}}])})],1)],1)]],2),e._v(" "),[a("footer",[a("div",[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]],2),e._v(" "),a("el-dialog",{staticClass:"welfare",attrs:{visible:e.dialogVisible,width:"80%",title:e.title},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[[a("el-form",{attrs:{"label-position":"left","label-width":"100px",model:e.formLabelAlign}},[a("el-form-item",{staticClass:"urlPage",attrs:{label:"页面跳转"}},[a("el-select",{on:{change:e.selectUrl},model:{value:e.formLabelAlign.jumpType,callback:function(t){e.$set(e.formLabelAlign,"jumpType",t)},expression:"formLabelAlign.jumpType"}},[a("el-option",{attrs:{label:"团体帮扶详情",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"公益详情",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"urlPage",attrs:{label:"项目名称"}},[[a("el-select",{attrs:{placeholder:"选择项目名称"},on:{change:e.selectName},model:{value:e.formLabelAlign.jumpId,callback:function(t){e.$set(e.formLabelAlign,"jumpId",t)},expression:"formLabelAlign.jumpId"}},e._l(e.projectName,function(e){return a("el-option",{key:e.projectId,attrs:{label:e.title,value:e.projectId}})}),1)]],2),e._v(" "),a("el-form-item",{attrs:{label:"项目图片"}},[a("div",{staticClass:"upload"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.formLabelAlign.imgUrl,expression:"formLabelAlign.imgUrl !=''"}],staticClass:"show"},[a("li",[a("div",{staticClass:"img",style:{backgroundImage:"url("+e.formLabelAlign.imgUrl+")",backgroundSize:"cover"},on:{click:function(t){return e.imgUrl(e.formLabelAlign.imgUrl)}}})])]),e._v(" "),a("div",{staticClass:"add"},[a("input",{attrs:{type:"file",id:"upload_file"},on:{change:function(t){return e.fileChange(t)}}}),e._v(" "),a("div",[a("i",{staticClass:"el-icon-plus"})])])]),e._v(" "),a("p",[e._v("（注明：图片比例2(长) : 1(宽)）")])]),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.resetForm}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")])],1)],1)]],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imgStatus,expression:"imgStatus"}],staticClass:"bigImg",on:{click:e.bigImg}},[a("div",[a("img",{attrs:{src:e.imgurl}})])])],1)},staticRenderFns:[]};var d=a("C7Lr")(g,p,!1,function(e){a("UW0L"),a("T9Uy")},"data-v-723d77ee",null);t.default=d.exports}});
//# sourceMappingURL=4.ca5ca85e5bfdee53bc62.js.map